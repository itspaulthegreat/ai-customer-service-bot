    $w(RATING_INPUT_ID).onChange(async () => {
        const product = dataset.getCurrentItem();
        try {
            const eligibility = await checkReviewEligibility(userId, product._id);
            if ((eligibility.canReview || eligibility.reviewStatus === CONSTANTS.REVIEWS.STATUSES.REJECTED) &&
                $w(RATING_INPUT_ID).value && !$w("#reviewForm").isVisible) {
                $w("#writeReviewButton").show();
                $w("#submitReviewButton").show();
            } else {
                $w("#writeReviewButton").hide();
                $w("#submitReviewButton").show();
            }
        } catch (error) {
            console.error("Error checking review eligibility on rating change:", error);
            $w("#writeReviewButton").hide();
        }
    });